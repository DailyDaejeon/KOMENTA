<template>
    <div class="container">
        <!-- <button :disabled="pageNum === 0" @click="prevPage" class="page-btn">
            &lt;
        </button>
        <button
            :disabled="pageNum >= pageCount - 1"
            @click="nextPage"
            class="page-btn"
        >
            &gt;
        </button> -->
        <div class="container__friend">
        <div class="at-section">
            <div class="at-section__title"><span class="at-section__nickname">{{userInfo.u_nickname}}</span>님의 친구들의 새로운 소식을 확인해보세요</div>
            <span class="at-section__subtitle">친구들의 플레이리스트를 확인하고, 취향에 맞는 VOD를 추천받아보세요!</span>
        </div>
            <div class="at-grid basic-scroll">
                <div class="at-column" v-for="(user,index) in this.following_list" :key="index">
                    <div class="at-user">
                        <div class="at-user__avatar" :src="user.u_profile_pic"></div>
                        <div class="at-user__name">{{user.u_nickname}}</div>
                        <div class="at-user__title">{{user.u_profile_pic}}</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="container__influencer">
            <div class="at-section">
                <div class="at-section__title popular-title at-section__nickname">KOMENTA TOP9 DJ</div>
                <span class="at-section__subtitle">{{userInfo.u_nickname }}님의 취향에 맞는 스트리밍DJ를 팔로우해보세요!</span>
            </div>
            <div class="at-grid basic-scroll">
                <div class="at-column" v-for="(user,index) in this.top9" :key="index">
                    <div class="at-user">
                        <div class="at-user__avatar" :src="user.u_profile_pic"></div>
                        <div class="at-user__name">{{uuser.u_nickname}}</div>
                        <div class="at-user__title">{{user.u_profile_pic}}</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</template>

<script>
import { top9followers,fetchfollowinglist } from '@/api/user'
// import { mapState } from 'vuex'
import store from '@/stores/modules/user'

export default {
    data() {
        return {
            // pageNum:0,
            following_list:[],
            top9:[],
            // pageSize:5,
    }},
    computed: {
    userInfo() {
        return store.state.userInfo;
    },
    // pageCount() {
    //     let listLeng = this.following_list.length,
    //     listize = this.pageSize,
    //     page = Math.floor(listLeng/listize);

    //     if (listLeng % listize >0) page+=1;

    //     return page;
    // },
    // paginatedData() {
    //     const start = this.pageNum * this.pageSize,
    //     end = start + this.pageSize;

    //     return this.fetchfollowinglist.slice(start,end);
    // }
    },
    created() {
        this.getFollowing()
        this.getTopInfluencer()
    },
    methods: {
      async getFollowing() {
        const userId = store.state.userInfo.u_id
        const response = await fetchfollowinglist(userId)
        this.following_list = response.data
      },
      async getTopInfluencer() {
          const response = await top9followers()
          this.top9 = response.data
      },
      nextPage() {
          this.pageNum +=1;
      },
      prevPage() {
          this.pageNum -=1;
      }
    },


}
</script>

<style>

